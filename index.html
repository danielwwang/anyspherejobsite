<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Join Anysphere - Building the future of AI-assisted coding with Cursor">
  <meta name="keywords" content="cursor, anysphere, engineering, ai coding, software jobs">
  <title>Cursor - Engineering Genius</title>
  <style>
    :root {
      --bg-primary: #191C24;
      --text-primary: #ffffff;
      --text-secondary: #cccccc;
      --text-muted: #888;
      --accent-color: #6366f1;
      --accent-hover: #5855eb;
      --border-color: #333;
      --container-max-width: 1000px;
      --spacing-sm: 1rem;
      --spacing-md: 2rem;
      --spacing-lg: 3rem;
      --spacing-xl: 4rem;
    }
    
    * {
      box-sizing: border-box;
    }
    
    html {
      background: var(--bg-primary);
      overflow-x: hidden;
      scroll-behavior: smooth;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
    }
    
    .hero-section {
      width: 100%;
      height: 50vh;
      background: url('cosmic-background.jpg') center/cover no-repeat;
      position: relative;
    }
    
    .hero-section::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(180deg, transparent 0%, var(--bg-primary) 100%);
    }
    
    .content-container {
      max-width: var(--container-max-width);
      margin: 0 auto;
      padding: var(--spacing-xl) var(--spacing-sm);
      background: var(--bg-primary);
    }
    
    .hero-video {
      width: 100%;
      max-width: 800px;
      margin: 0 auto 3rem auto;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      border: 1px solid #333;
    }
    
    .hero-video iframe {
      width: 100%;
      height: 450px;
      border: none;
      display: block;
    }
    
    @media (max-width: 768px) {
      .hero-video iframe {
        height: 250px;
      }
      
      .content-container {
        padding: var(--spacing-md) var(--spacing-sm);
      }
      
      .hero-section {
        height: 40vh;
      }
      
      .job-table td {
        padding: 0.75rem 0;
      }
    }
    
    .main-title {
      font-size: clamp(2rem, 5vw, 3rem);
      margin-bottom: var(--spacing-md);
      font-weight: 700;
      color: var(--text-primary);
      text-align: left;
      line-height: 1.2;
    }
    
    .description {
      font-size: 1.1rem;
      line-height: 1.8;
      color: var(--text-secondary);
      margin-bottom: var(--spacing-lg);
      max-width: 800px;
    }
    
    .description p {
      margin-bottom: 1.5rem;
    }
    
    .signature {
      margin-top: var(--spacing-md);
      font-style: italic;
      color: var(--text-muted);
    }
    
    .careers-section {
      margin-top: var(--spacing-xl);
    }
    
    .careers-title {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: var(--spacing-md);
      color: var(--text-primary);
    }
    
    .job-category {
      margin-bottom: var(--spacing-sm);
    }
    
    .category-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--text-muted);
      margin-bottom: var(--spacing-sm);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .job-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 0.5rem;
    }
    
    .job-table tr {
      border-bottom: 1px solid var(--border-color);
      transition: background-color 0.2s ease;
    }
    
    .job-table tr:hover {
      background-color: rgba(255, 255, 255, 0.02);
    }
    
    .job-table td {
      padding: var(--spacing-sm) 0;
      vertical-align: middle;
    }
    
    .job-link {
      color: var(--text-primary);
      text-decoration: none;
      font-size: 1rem;
      transition: color 0.2s ease;
      position: relative;
    }
    
    .job-link:hover {
      color: var(--accent-color);
    }
    
    .job-link:focus {
      outline: 2px solid var(--accent-color);
      outline-offset: 2px;
      border-radius: 2px;
    }
    
    .location {
      color: var(--text-muted);
      font-size: 0.9rem;
      text-align: right;
    }
    
    .contact-info {
      margin-top: var(--spacing-lg);
      padding-top: var(--spacing-md);
      border-top: 1px solid var(--border-color);
      color: var(--text-muted);
      font-size: 0.95rem;
    }
    
    .contact-info a {
      color: var(--text-secondary);
      text-decoration: none;
      transition: color 0.2s ease;
    }
    
    .contact-info a:hover {
      color: var(--accent-color);
    }
    
    .contact-info a:focus {
      outline: 2px solid var(--accent-color);
      outline-offset: 2px;
      border-radius: 2px;
    }
  </style>
  </head>
  <body>
    <div class="hero-section"></div>
    <div class="content-container">
    <h1 class="main-title">Engineering Genius</h1>
    
    <div class="description">
    <p>Anysphere is an applied research lab working on automating coding. Our approach is to build the engineer of the future: a human-AI programmer that's an order of magnitude more effective than any one programmer.</p>
    
    <p>This hybrid engineer will have effortless control over their codebase and no low-entropy keystrokes. They will iterate at the speed of their judgment, even in the most complex systems. Using a combination of AI and human ingenuity, they will out-smart and out-engineer the best pure-AI system.</p>
    
    <p>We are a group of researchers and engineers. We build software and models to invent at the edge of what's useful and what's possible. Our work has already improved the lives of millions of programmers.</p>
    
    <p>If this excites you, we'd love to hear from you.</p>
    
    <div class="signature">
      â€” Aman, Sualeh, Michael, Arvid, and the entire Anysphere team
    </div>
  </div>
  
  <div class="hero-video">
    <iframe src="https://drive.google.com/file/d/1YsWBJisDuPZorJqLTySKnV2bQr2v-khC/preview" 
            width="100%" 
            height="360" 
            frameborder="0" 
            allow="autoplay; fullscreen" 
            title="Cursor Demo">
    </iframe>
  </div>
  
  <div class="careers-section">
    <h2 class="careers-title">Careers</h2>
    
    <div class="job-category">
      <div class="category-title">Engineering</div>
      <table class="job-table">
        <tr>
          <td><a href="generalist.html" class="job-link" data-job-id="36e69353-0452-4bf6-9f35-b1e7307959a7">Software Engineer, Generalist</a></td>
          <td class="location">San Francisco</td>
        </tr>
        <tr>
          <td><a href="research-engineer.html" class="job-link" data-job-id="0aa0650b-f93c-416e-9e2f-4fdf1556fd14">Software Engineer, ML Research</a></td>
          <td class="location">San Francisco</td>
        </tr>
        <tr>
          <td><a href="product-engineer.html" class="job-link" data-job-id="3551cdaa-cf08-4c04-adbe-a968185bc769">Software Engineer, Product</a></td>
          <td class="location">San Francisco</td>
        </tr>
        <tr>
          <td><a href="enterprise-product-engineer.html" class="job-link" data-job-id="54a9cfcd-570a-4e9c-b52c-bd2336c60991">Product Engineer, Enterprise</a></td>
          <td class="location">San Francisco</td>
        </tr>
        <tr style="border-bottom: none;">
          <td><a href="infrastructure-engineer.html" class="job-link" data-job-id="6f92f594-f76c-47eb-8c45-09c6b140b512">Software Engineer, Infrastructure</a></td>
          <td class="location">San Francisco</td>
        </tr>
      </table>
    </div>
    
    <div class="job-category">
      <div class="category-title">Go-To-Market</div>
      <table class="job-table">
        <tr>
          <td><a href="emerging-enterprise.html" class="job-link" data-job-id="61e4677d-cf3d-458a-bf6c-02287d5d2c39">Emerging Enterprise AE (SF)</a></td>
          <td class="location">San Francisco</td>
        </tr>
        <tr style="border-bottom: none;">
          <td><a href="enterprise-ae.html" class="job-link" data-job-id="635af96e-4fd6-458f-839c-06b9dde86559">Enterprise AE (SF)</a></td>
          <td class="location">San Francisco</td>
        </tr>
      </table>
    </div>
  </div>
  </div>
  
  <script>
    'use strict';
    
    class JobTitleLoader {
      constructor() {
        this.loadingStates = new Map();
        this.retryCount = new Map();
        this.maxRetries = 3;
      }
      
      async loadJobTitles() {
        const jobLinks = document.querySelectorAll('.job-link[data-job-id]');
        
        if (!jobLinks.length) {
          console.warn('No job links found with data-job-id attribute');
          return;
        }
        
        const loadPromises = Array.from(jobLinks).map(link => 
          this.loadSingleJobTitle(link)
        );
        
        try {
          await Promise.allSettled(loadPromises);
        } catch (error) {
          console.error('Error in batch job title loading:', error);
        }
      }
      
      async loadSingleJobTitle(link) {
        const jobId = link.getAttribute('data-job-id');
        
        if (!jobId) {
          console.warn('Job link missing data-job-id:', link);
          return;
        }
        
        if (this.loadingStates.get(jobId)) {
          return; // Already loading
        }
        
        this.loadingStates.set(jobId, true);
        
        try {
          const data = await this.fetchJobTitle(jobId);
          
          if (data?.success && data?.title) {
            link.textContent = data.title;
            link.setAttribute('aria-label', `Apply for ${data.title}`);
          } else {
            console.error(`Failed to load title for ${jobId}:`, data?.error || 'Unknown error');
            this.handleLoadError(link, jobId);
          }
        } catch (error) {
          console.error(`Error loading title for ${jobId}:`, error);
          this.handleLoadError(link, jobId);
        } finally {
          this.loadingStates.set(jobId, false);
        }
      }
      
      async fetchJobTitle(jobId) {
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 10000); // 10s timeout
        
        try {
          const response = await fetch('/api/get-job-title', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ jobPostingId: jobId }),
            signal: controller.signal
          });
          
          clearTimeout(timeoutId);
          
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }
          
          return await response.json();
        } catch (error) {
          clearTimeout(timeoutId);
          throw error;
        }
      }
      
      handleLoadError(link, jobId) {
        const retries = this.retryCount.get(jobId) || 0;
        
        if (retries < this.maxRetries) {
          this.retryCount.set(jobId, retries + 1);
          setTimeout(() => {
            this.loadSingleJobTitle(link);
          }, Math.pow(2, retries) * 1000); // Exponential backoff
        } else {
          console.error(`Max retries reached for job ${jobId}`);
        }
      }
    }
    
    // Initialize and load job titles when DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      const loader = new JobTitleLoader();
      loader.loadJobTitles();
    });
  </script>
</body>
</html>
